<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>팀 전력 비교 분석</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/analysisPage.css') }}"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <header>
      <div class="container header-content">
        <a href="/" class="logo">KBO Stat Lab</a>
        <nav>
          <ul>
            <li><a href="/team">Team</a></li>
            <li><a href="/player_compare">선수-선수 비교분석</a></li>
            <li><a href="/analysis">팀-팀 비교분석</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="analysis-header">
        <h2>팀 전력 상세 비교 (WAA)</h2>
        <p>두 팀을 선택하여 부문별 승리 기여도와 순위를 비교해보세요.</p>

        <div class="selection-area">
          <div class="select-group">
            <label>Team A</label>
            <select id="team1-select">
              <option value="" disabled selected>팀 선택</option>
              {% for name in team_names %}
              <option value="{{ name }}">{{ name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="vs-badge">VS</div>

          <div class="select-group">
            <label>Team B</label>
            <select id="team2-select">
              <option value="" disabled selected>팀 선택</option>
              {% for name in team_names %}
              <option value="{{ name }}">{{ name }}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <button onclick="compareTeams()" class="analyze-btn">분석하기</button>
      </section>

      <div
        id="comparison-result"
        class="comparison-container"
        style="display: none; flex-direction: column; align-items: center"
      >
        <div
          style="
            display: flex;
            gap: 40px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
          "
        >
          <div class="result-box">
            <h3 id="team1-name-display"></h3>
            <img id="team1-img" src="" alt="Team A 분석표" />
          </div>
          <div class="result-box">
            <h3 id="team2-name-display"></h3>
            <img id="team2-img" src="" alt="Team B 분석표" />
          </div>
        </div>

        <h2 style="margin-bottom: 15px; color: #333">팀별 대결 기록</h2>
        <div
          style="
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
            justify-content: center;
          "
        >
          <div class="result-box">
            <h3 id="record1-title"></h3>
            <img id="record1-img" src="" alt="상대전적 A" />
          </div>
          <div class="result-box">
            <h3 id="record2-title"></h3>
            <img id="record2-img" src="" alt="상대전적 B" />
          </div>
        </div>
      </div>
    </main>

    <script>
      function compareTeams() {
        const team1 = document.getElementById("team1-select").value;
        const team2 = document.getElementById("team2-select").value;

        if (!team1 || !team2) {
          alert("두 팀을 모두 선택해주세요.");
          return;
        }

        if (team1 === team2) {
          alert("서로 다른 팀을 선택해주세요.");
          return;
        }

        // 1. 컨테이너 보이기
        const container = document.getElementById("comparison-result");
        container.style.display = "flex";

        // 2. WAA 분석 표 설정 (기존)
        document.getElementById("team1-name-display").textContent =
          team1 + " 분석 (WAA)";
        document.getElementById("team2-name-display").textContent =
          team2 + " 분석 (WAA)";
        document.getElementById(
          "team1-img"
        ).src = `/static/image/table/table_${team1}.png`;
        document.getElementById(
          "team2-img"
        ).src = `/static/image/table/table_${team2}.png`;

        // 3. ★ 상대 전적 표 설정 (신규)
        document.getElementById(
          "record1-title"
        ).textContent = `${team1} vs ${team2} 전적`;
        document.getElementById(
          "record2-title"
        ).textContent = `${team2} vs ${team1} 전적`;

        // 파일명 규칙: record_팀_vs_상대.png
        document.getElementById(
          "record1-img"
        ).src = `/static/image/record/record_${team1}_vs_${team2}.png`;
        document.getElementById(
          "record2-img"
        ).src = `/static/image/record/record_${team2}_vs_${team1}.png`;
      }
    </script>
  </body>
</html>
